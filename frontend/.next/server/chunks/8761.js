"use strict";exports.id=8761,exports.ids=[8761],exports.modules={8761:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(8385);let o=process.env.STRIPE_SECRET_KEY?new a.Z(process.env.STRIPE_SECRET_KEY):null;let PaymentService=class PaymentService{static async createDepositIntent(e,t){if(!o)throw Error("Stripe not configured");try{let r=await o.paymentIntents.create({amount:Math.round(100*t),currency:"usd",metadata:{userId:e,type:"deposit",timestamp:new Date().toISOString()},automatic_payment_methods:{enabled:!0}});return r}catch(e){throw console.error("Stripe payment intent creation failed:",e),Error("Failed to create payment intent")}}static async createPayout(e,t,r){if(!o)throw Error("Stripe not configured");try{let a=await o.transfers.create({amount:Math.round(100*t),currency:"usd",destination:r,metadata:{userId:e,type:"withdrawal",timestamp:new Date().toISOString()}});return a}catch(e){throw console.error("Stripe payout creation failed:",e),Error("Failed to create payout")}}static async handleWebhook(e,t){if(!o)throw Error("Stripe not configured");try{let r=o.webhooks.constructEvent(e,t,process.env.STRIPE_WEBHOOK_SECRET);switch(r.type){case"payment_intent.succeeded":let a=r.data.object;await this.processDeposit(a);break;case"payment_intent.payment_failed":console.log("Payment failed:",r.data.object);break;default:console.log(`Unhandled event type: ${r.type}`)}return{received:!0}}catch(e){throw console.error("Webhook error:",e),Error("Webhook handling failed")}}static async processDeposit(e){let t=e.metadata.userId,r=e.amount/100;console.log(`Processing deposit: User ${t}, Amount $${r}`)}};let n=PaymentService}};