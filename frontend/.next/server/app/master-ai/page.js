(()=>{var e={};e.id=5065,e.ids=[5065],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(7096),a=s(6132),l=s(7284),i=s.n(l),o=s(2564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["master-ai",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7420)),"/workspaces/AI-Trader/frontend/app/master-ai/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3250)),"/workspaces/AI-Trader/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/AI-Trader/frontend/app/master-ai/page.tsx"],x="/master-ai/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/master-ai/page",pathname:"/master-ai",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2190:(e,t,s)=>{Promise.resolve().then(s.bind(s,9057))},9057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>MasterAIPage});var r=s(784),a=s(9885),l=s(3728),i=s(4722),o=s(2715),n=s(1440),d=s.n(n),c=s(9803),x=s(7552),m=s(2954),u=s(7),g=s(5987);function MasterAIPage(){let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[b,f]=(0,a.useState)(!0),[y,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(15e3);(0,a.useEffect)(()=>{loadMasterPortfolio()},[]);let loadMasterPortfolio=async()=>{try{let e=await fetch("https://ai-trader-yiea.onrender.com/api/portfolio");if(e.ok){let t=await e.json();n(t.masterPortfolio)}}catch(e){console.error("Failed to load master portfolio:",e)}},runGlobalAnalysis=async()=>{t(!0),j(!1);try{let e=await fetch("https://ai-trader-yiea.onrender.com/api/master-ai-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"analyze"})});if(!e.ok)throw Error(`API error: ${e.status}`);let t=await e.json();p(t),n(t.masterPortfolio),j(!0),setTimeout(()=>{let e=document.getElementById("analysis-results");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300),setTimeout(()=>{j(!1)},3e3)}catch(e){console.error("Global analysis failed:",e),alert("AI Analysis failed. Check console for details.")}finally{t(!1)}},toggleAITrading=async()=>{try{f(!b),alert(b?"AI Trading paused for your account":"AI Trading resumed for your account")}catch(e){console.error("Failed to toggle AI trading:",e)}},startAIOnboarding=async()=>{if(w<100){alert("Please add funds to your wallet first (minimum $100)");return}try{let e=await fetch("/api/master-ai-supabase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"onboard",userId:"user-"+Date.now(),initialInvestment:w})});if(e.ok){let t=await e.json();f(!0),alert(`✅ AI Trading started! Your $${(w||0).toLocaleString()} has been allocated across ${t?.userPortfolio?.portfolio?.length||0} AI-selected stocks.`),console.log("User portfolio:",t.userPortfolio)}}catch(e){console.error("Onboarding failed:",e)}},getActionColor=e=>{switch(e){case"buy":return"text-green-600 bg-green-100";case"sell":return"text-red-600 bg-red-100";case"hold":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},getConfidenceBar=e=>r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${e>.7?"bg-green-500":e>.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${100*e}%`}})});return r.jsx(o.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(i.Z,{}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)(d(),{href:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx(c.Z,{size:20,className:"mr-2"}),"Back to Dashboard"]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${b?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b?"AI Trading Active":"AI Trading Paused"})})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDE0 Master AI Trading Engine"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["One AI brain making decisions for all ",s?.totalUsers||1200,"+ users"]})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-600 rounded-xl p-6 mb-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Current AI Portfolio"}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-slate-300 text-sm font-medium",children:"Synchronized across all users"}),(0,r.jsxs)("p",{className:"text-emerald-400 text-lg font-bold",children:[(s?.totalUsers||1200).toLocaleString()," users"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[(s?.holdings||[{symbol:"AAPL",percentage:15,value:75e5,change:2.1},{symbol:"GOOGL",percentage:12,value:6e6,change:1.8},{symbol:"MSFT",percentage:10,value:5e6,change:-.5},{symbol:"NVDA",percentage:8,value:4e6,change:3.2},{symbol:"TSLA",percentage:7,value:35e5,change:4.5}]).map((e,t)=>(0,r.jsxs)("div",{className:"bg-slate-700 border border-slate-500 rounded-lg p-4 text-center hover:bg-slate-600 transition-colors",children:[r.jsx("h3",{className:"font-bold text-white text-xl mb-1",children:e.symbol}),(0,r.jsxs)("p",{className:"text-slate-200 text-sm font-medium",children:[((e?.weight||e?.percentage||0)*(e?.weight?100:1)).toFixed(1),"% weight"]}),(0,r.jsxs)("p",{className:"text-emerald-400 text-lg font-bold",children:["$",e?.value?.toLocaleString()||e?.entryPrice||"N/A"]}),r.jsx("p",{className:"text-slate-300 text-sm",children:e?.entryDate?`Entry: ${new Date(e.entryDate).toLocaleDateString()}`:`Change: ${(e?.change||0).toFixed(1)}%`})]},t)),(0,r.jsxs)("div",{className:"bg-blue-700 border border-blue-500 rounded-lg p-4 text-center hover:bg-blue-600 transition-colors",children:[r.jsx("h3",{className:"font-bold text-white text-xl mb-1",children:"CASH"}),r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"5.0%"}),r.jsx("p",{className:"text-blue-200 text-lg font-bold",children:"Reserve"}),r.jsx("p",{className:"text-blue-300 text-sm",children:"Liquidity"})]})]}),(0,r.jsxs)("div",{className:"border-t border-slate-600 pt-4 text-center",children:[(0,r.jsxs)("p",{className:"text-slate-200 text-sm font-medium",children:["Last AI decision: ",new Date(s?.lastUpdated||Date.now()).toLocaleString()]}),(0,r.jsxs)("p",{className:"text-slate-400 text-xs",children:["ID: ",s?.aiDecisionId||"ai-decision-"+Date.now()]})]})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"AI Trading Controls"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b?(0,r.jsxs)("button",{onClick:toggleAITrading,className:"py-4 rounded-lg font-semibold text-lg bg-gradient-to-r from-yellow-600 to-orange-600 text-white hover:from-yellow-700 hover:to-orange-700 shadow-lg hover:shadow-xl transition-all flex items-center justify-center",children:[r.jsx(m.Z,{size:20,className:"mr-2"}),"Pause AI Trading"]}):(0,r.jsxs)("button",{onClick:startAIOnboarding,disabled:w<100,className:`py-4 rounded-lg font-semibold text-lg transition-all flex items-center justify-center ${w<100?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700 shadow-lg hover:shadow-xl"}`,children:[r.jsx(x.Z,{size:20,className:"mr-2"}),"Start AI Trading ($",(w||0).toLocaleString(),")"]}),r.jsx("button",{onClick:runGlobalAnalysis,disabled:e,className:`py-4 rounded-lg font-semibold text-lg transition-all flex items-center justify-center ${e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 shadow-lg hover:shadow-xl"}`,children:e?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"AI Analyzing..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(u.Z,{size:20,className:"mr-2"}),"Run Market Analysis"]})}),y&&r.jsx(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-4 p-4 bg-green-500/20 border border-green-400/50 rounded-lg text-green-300 text-center",children:"✅ Analysis complete! Check results below ⬇️"}),r.jsx(d(),{href:"/portfolio",children:(0,r.jsxs)("button",{className:"w-full py-4 rounded-lg font-semibold text-lg bg-gradient-to-r from-gray-600 to-gray-700 text-white hover:from-gray-700 hover:to-gray-800 shadow-lg hover:shadow-xl transition-all flex items-center justify-center",children:[r.jsx(g.Z,{size:20,className:"mr-2"}),"View Portfolio"]})})]}),w<100&&r.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-yellow-800 text-sm",children:[r.jsx("strong",{children:"Add funds to start:"})," You need at least $100 to begin AI trading.",r.jsx(d(),{href:"/wallet",className:"text-yellow-900 underline hover:text-yellow-700 ml-1",children:"Add funds to your wallet →"})]})}),(0,r.jsxs)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-blue-900 font-medium mb-2",children:"\uD83E\uDD16 How Master AI Works:"}),(0,r.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[r.jsx("li",{children:"• AI continuously monitors global markets, news, and economic indicators"}),(0,r.jsxs)("li",{children:["• Makes centralized buy/sell decisions affecting all ",s?.totalUsers||1200,"+ users"]}),r.jsx("li",{children:"• Your funds are automatically allocated to AI-selected stocks"}),r.jsx("li",{children:"• When AI sells, your positions sell automatically too"}),r.jsx("li",{children:"• You can pause/resume AI trading anytime"})]})]})]}),h&&(0,r.jsxs)(l.E.div,{id:"analysis-results",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-emerald-900 to-teal-900 border-2 border-emerald-400 rounded-xl p-6 shadow-xl shadow-emerald-400/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Latest AI Global Analysis"}),r.jsx("span",{className:"px-4 py-2 bg-emerald-500 text-white text-sm font-bold rounded-full animate-pulse shadow-lg",children:"\uD83C\uDFAF NEW RESULTS"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-slate-700 border border-emerald-400 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:h?.aiDecisions?.filter(e=>"buy"===e.action).length||0}),r.jsx("div",{className:"text-sm font-medium text-emerald-200",children:"Buy Signals"})]}),(0,r.jsxs)("div",{className:"bg-slate-700 border border-red-400 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-red-400",children:h?.aiDecisions?.filter(e=>"sell"===e.action).length||0}),r.jsx("div",{className:"text-sm font-medium text-red-200",children:"Sell Signals"})]}),(0,r.jsxs)("div",{className:"bg-slate-700 border border-yellow-400 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:h?.aiDecisions?.filter(e=>"hold"===e.action).length||0}),r.jsx("div",{className:"text-sm font-medium text-yellow-200",children:"Hold Signals"})]}),(0,r.jsxs)("div",{className:"bg-slate-700 border border-purple-400 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-400",children:(h?.affectedUsers||1200).toLocaleString()}),r.jsx("div",{className:"text-sm font-medium text-purple-200",children:"Users Affected"})]})]}),r.jsx("div",{className:"space-y-4",children:(h?.aiDecisions||[]).map((e,t)=>(0,r.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"bg-slate-700 border border-slate-500 rounded-lg p-4 hover:bg-slate-600 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-bold text-white text-xl",children:e.symbol}),r.jsx("span",{className:`px-3 py-1 rounded-lg font-bold ${getActionColor(e.action)}`,children:e.action.toUpperCase()})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-white font-bold text-lg",children:["$",(e?.currentPrice||e?.current_price||0).toFixed(2)]}),(0,r.jsxs)("p",{className:"text-slate-300 text-sm font-medium",children:["Target: $",(e?.targetPrice||e?.target_price||0).toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-slate-200 text-sm font-medium",children:"AI Confidence"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[(100*(e?.confidence||0)).toFixed(1),"%"]})]}),getConfidenceBar(e.confidence)]}),r.jsx("p",{className:"text-slate-200 text-sm",children:e.reasoning})]},e.symbol))}),(0,r.jsxs)("div",{className:"mt-6 text-center text-gray-400 text-sm border-t border-white/10 pt-4",children:[(0,r.jsxs)("p",{children:["Global analysis completed at ",new Date(h?.timestamp||Date.now()).toLocaleString()]}),(0,r.jsxs)("p",{className:"text-yellow-400",children:["These decisions will affect all ",(h?.affectedUsers||1200).toLocaleString()," platform users",h?.paperTrading&&" • Paper Trading Mode"]})]})]})]})]})})}},7420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=s(5153);let a=(0,r.createProxy)(String.raw`/workspaces/AI-Trader/frontend/app/master-ai/page.tsx`),{__esModule:l,$$typeof:i}=a,o=a.default,n=o}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[3657,5523,3782,7104,3728,289,7728,4722,2715],()=>__webpack_exec__(834));module.exports=s})();