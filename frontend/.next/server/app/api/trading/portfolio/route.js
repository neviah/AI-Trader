"use strict";(()=>{var e={};e.id=7249,e.ids=[7249],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},5267:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>y,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>m});var o={};r.r(o),r.d(o,{GET:()=>GET});var a=r(884),i=r(6132),n=r(5798),s=r(7147),d=r.n(s),l=r(1017),p=r.n(l);async function GET(e){try{let e=p().join(process.cwd(),"..","data"),t=[];if(!d().existsSync(e))return n.Z.json({error:"No trading data found",message:"Trading system not initialized"},{status:404});let r=d().readdirSync(e).filter(t=>d().statSync(p().join(e,t)).isDirectory());for(let o of r){let r=p().join(e,o,"position","position.jsonl");if(d().existsSync(r))try{let e=d().readFileSync(r,"utf-8").trim().split("\n"),a=e.filter(e=>e.trim()).map(e=>JSON.parse(e)),i=a[a.length-1],n=i?.positions?.CASH||0,s=[];Object.entries(i?.positions||{}).forEach(([e,t])=>{if("CASH"!==e&&t>0){let r=e.includes(".")?50:150,o=t*r;n+=o,s.push({symbol:e,quantity:t,value:o})}}),t.push({name:o,totalValue:n,cash:i?.positions?.CASH||0,holdings:s,lastUpdate:i?.date,totalTrades:a.filter(e=>e.this_action?.action!=="no_trade").length})}catch(e){console.error(`Error reading position file for ${o}:`,e)}}return n.Z.json({agents:t,summary:{totalAgents:t.length,totalValue:t.reduce((e,t)=>e+t.totalValue,0),activeTrades:t.reduce((e,t)=>e+t.totalTrades,0)}})}catch(e){return console.error("Portfolio API error:",e),n.Z.json({error:"Failed to fetch portfolio data",message:"An error occurred while reading trading data"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/trading/portfolio/route",pathname:"/api/trading/portfolio",filename:"route",bundlePath:"app/api/trading/portfolio/route"},resolvedPagePath:"/workspaces/AI-Trader/frontend/app/api/trading/portfolio/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:g,headerHooks:h,staticGenerationBailout:m}=u,y="/api/trading/portfolio/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[1997],()=>__webpack_exec__(5267));module.exports=r})();